import{s as J,j as e,N as Qt,M as ht,g as Te,a as pt,b as ge,f as ft,c as Zt,d as ea,e as ta,u as se,i as aa,h as sa,k as na,l as xe}from"./index-C0-c8-6Z.js";import{a as m,d as ia,F as la,o as $e,p as ra,G as ca,q as oa,s as gt,t as xt,u as da,f as K,R as Me,C as ua,X as be,E as ma,b as ha,v as bt,e as pa,I as fa,U as ga,T as xa,S as ba,j as ja,i as va}from"./icons-DlS2GzSP.js";import{u as ya}from"./ArchiveBase-CCIq2_BE.js";import"./vendor-C2p7Ne83.js";const W=[{id:"post",label:"è²¼æ–‡",icon:"ðŸ“·",color:"#E1306C"},{id:"story",label:"Story",icon:"â­•",color:"#833AB4"},{id:"reels",label:"Reels",icon:"ðŸŽ¬",color:"#F77737"}],jt={"G-Dragon":{main:"xxxibgdrgn"},"T.O.P":{main:"ttt",extra:[{username:"tttopost",type:"post",dateFormat:"auto"},{username:"top.ttt.story",type:"story",dateFormat:"auto",isPrefix:!0}]},å¤ªé™½:{main:"__youngbae__"},å¤§è²:{main:"d_lable_official"},å‹åˆ©:{main:""},å…¨å“¡:{main:"bigbangofficial"}};function Ie(v){if(!v)return"å…¨å“¡";const y=v.toLowerCase();for(const[T,$]of Object.entries(jt)){if($.main&&y===$.main.toLowerCase())return T;if($.extra)for(const k of $.extra){const S=k.username.toLowerCase();if(k.isPrefix?y.startsWith(S):y===S)return T}}return"å…¨å“¡"}function Be(v){if(!v)return null;const y=v.toLowerCase();for(const T of Object.values(jt))if(T.extra)for(const $ of T.extra){const k=$.username.toLowerCase();if($.isPrefix?y.startsWith(k):y===k)return $}return null}function Q(v,y){if(!v||!y)return null;function T(k){const S=k.match(/(\d{4})-(\d{1,2})-(\d{1,2})/);if(S){const G=S[1],A=S[2].padStart(2,"0"),E=S[3].padStart(2,"0");return`${G}-${A}-${E}`}return null}function $(k){const S=k.match(/\b(\d{6})\b/);if(S){const G=S[1],A=parseInt(G.substring(0,2),10),E=G.substring(2,4),ne=G.substring(4,6);return`${A>=50?1900+A:2e3+A}-${E}-${ne}`}return null}return y==="auto"?T(v)||$(v):y==="iso"?T(v):y==="6digits"?$(v):null}function wa(v){if(!v)return null;const y=v.match(/instagram\.com\/stories\/([^\/]+)\//);if(y)return y[1];const T=v.match(/instagram\.com\/([^\/]+)\/(?:p|reel|reels|tv)\//);return T&&!["p","reel","reels","tv","stories","explore"].includes(T[1])?T[1]:null}function ze(v,y){return v||wa(y)||null}async function De(v){try{const y=`${na.IG_SCRAPER_URL}/scrape?url=${encodeURIComponent(v)}`;return await(await fetch(y)).json()}catch(y){return console.error("IG æŠ“å–å¤±æ•—:",y),{success:!1,error:y.message}}}function Na({isAdmin:v,onBack:y,currentPage:T,setCurrentPage:$}){var nt,it,lt,rt,ct,ot;const[k,S]=m.useState([]),[G,A]=m.useState(!0),[E,ne]=m.useState(!1),[Z,Pe]=m.useState(null),[ie,vt]=m.useState("all"),[le,yt]=m.useState("all"),[ee,wt]=m.useState(!1),[re,Nt]=m.useState(!1),[ce,kt]=m.useState(""),[O,Fe]=m.useState("grid"),[P,Ct]=m.useState({}),[je,Ae]=m.useState(!1),[Oe,Ge]=m.useState({current:0,total:0}),[St,L]=m.useState(!1),[M,Le]=m.useState(null),[h,C]=m.useState({type:"post",member:"å…¨å“¡",date:new Date().toISOString().split("T")[0],time:"",igUrl:"",caption:"",media:[],notes:""}),[Re,Ve]=m.useState(!1),[c,R]=m.useState(null),[F,V]=m.useState(0),[_,_e]=m.useState(!1),[Y,H]=m.useState([]),[Ye,We]=m.useState(!1),[Ee,He]=m.useState({current:0,total:0}),[Ut,qe]=m.useState(null),q=m.useRef(!1),[z,ve]=m.useState(null),ye=m.useRef(null),[te,we]=m.useState(()=>window.innerWidth<500?2:Math.max(2,Math.floor(Math.min(900,window.innerWidth)/280)));m.useEffect(()=>{Tt()},[]);async function Tt(){A(!0);try{const t=await J.load();S(t)}catch(t){console.error("è¼‰å…¥å¤±æ•—",t),f("è¼‰å…¥å¤±æ•—","error")}finally{A(!1)}}function f(t,s="success"){Pe({msg:t,type:s}),setTimeout(()=>Pe(null),2500)}function oe({title:t,content:s,type:n="warning",confirmText:a="ç¢ºå®š",cancelText:d="å–æ¶ˆ"}){return new Promise(r=>{ve({title:t,content:s,type:n,confirmText:a,cancelText:d,onConfirm:()=>{ve(null),r(!0)},onCancel:()=>{ve(null),r(!1)}})})}function $t(t){var s;return(s=t.media)==null?void 0:s.some(n=>n.type==="video"||n.type==="youtube")}function Mt(t){var s;return((s=P[t.id])==null?void 0:s.length)>0}async function ae(t){if(!t)return!1;try{const s=new AbortController,n=setTimeout(()=>s.abort(),1e4),a=await fetch(t,{method:"HEAD",mode:"cors",signal:s.signal});return clearTimeout(n),a.ok?!0:(console.log(`âŒ åœ–ç‰‡æª¢æŸ¥å¤±æ•— (HTTP ${a.status}): ${t}`),!1)}catch{return new Promise(n=>{const a=new window.Image,d=setTimeout(()=>{a.src="",n(!1)},1e4);a.onload=()=>{clearTimeout(d),a.naturalWidth===0||a.naturalHeight===0?n(!1):n(!0)},a.onerror=()=>{clearTimeout(d),n(!1)},a.src=t})}}async function It(){var a;Ae(!0),Ge({current:0,total:k.length});const t={};let s=0;for(const d of k){const r=[];if(((a=d.media)==null?void 0:a.length)>0)for(let o=0;o<d.media.length;o++){const i=d.media[o],j=i.type==="video"?i.thumbnail:i.url;j&&(await ae(j)||r.push(o))}r.length>0&&(t[d.id]=r),s++,Ge({current:s,total:k.length})}Ct(t),Ae(!1);const n=Object.keys(t).length;n>0?f(`æª¢æŸ¥å®Œæˆï¼š${n} ç­†æœ‰å£žåœ–`,"error"):f("æª¢æŸ¥å®Œæˆï¼šæ²’æœ‰ç™¼ç¾å£žåœ– âœ…")}const U=m.useMemo(()=>k.filter(t=>{var s;return!(ie!=="all"&&t.member!==ie||le!=="all"&&t.type!==le||ee&&!$t(t)||re&&!Mt(t)||ce&&!((s=t.caption)!=null&&s.toLowerCase().includes(ce.toLowerCase())))}).sort((t,s)=>new Date(s.date)-new Date(t.date)),[k,ie,le,ee,re,ce,P]);m.useEffect(()=>{const t=ye.current;if(!t)return;const s=()=>{if(O!=="grid"){we(1);return}const a=Math.min(t.clientWidth,window.innerWidth);if(a<500){we(2);return}we(Math.max(2,Math.floor(a/280)))};s();const n=new ResizeObserver(s);return n.observe(t),()=>n.disconnect()},[O]);const Bt=m.useMemo(()=>Math.ceil(U.length/te),[U.length,te]),Ne=ya({count:Bt,getScrollElement:()=>ye.current,estimateSize:()=>O==="grid"?340:120,overscan:3,gap:O==="grid"?16:10});function Xe(){Le(null),C({type:"post",member:"å…¨å“¡",date:new Date().toISOString().split("T")[0],time:"",igUrl:"",caption:"",media:[],notes:""}),L(!0)}function zt(t){Le(t),C({type:t.type,member:t.member,date:t.date,time:t.time||"",igUrl:t.igUrl||"",caption:t.caption||"",media:t.media||[],notes:t.notes||""}),L(!0)}function Dt(t){R(t),V(0)}function Pt(){const t=U.findIndex(s=>s.id===(c==null?void 0:c.id));t>0&&(R(U[t-1]),V(0))}function Ft(){const t=U.findIndex(s=>s.id===(c==null?void 0:c.id));t<U.length-1&&(R(U[t+1]),V(0))}function ke(){return U.findIndex(t=>t.id===(c==null?void 0:c.id))}const[Je,de]=m.useState(new Set);function ue(t){return Je.has(t)}async function At(){var n,a,d,r,o;if(!(c!=null&&c.igUrl)){f("æ­¤è²¼æ–‡æ²’æœ‰ IG é€£çµ","error");return}if(ue(c.id)){f("æ­¤è²¼æ–‡æ­£åœ¨åŒæ­¥ä¸­...","info");return}const t={...c},s=c.id;de(i=>new Set(i).add(s));try{const i=await De(t.igUrl);if(!i.success||!((n=i.media)!=null&&n.length)){if(!await oe({title:"âš ï¸ æŠ“å–å¤±æ•—",type:"warning",confirmText:"æ¸…ç©ºåª’é«”",cancelText:"å–æ¶ˆ",content:e.jsxs("div",{className:"confirm-content",children:[e.jsx("p",{children:"å¯èƒ½åŽŸå› ï¼š"}),e.jsxs("ul",{children:[e.jsx("li",{children:"IG è²¼æ–‡å·²è¢«åˆªé™¤"}),e.jsx("li",{children:"IG API æš«æ™‚ç„¡æ³•å­˜å–"}),e.jsx("li",{children:"ç¶²è·¯é€£ç·šå•é¡Œ"})]}),e.jsx("p",{className:"confirm-warning",children:"æ˜¯å¦ä»è¦æ¸…ç©ºæ­¤è²¼æ–‡çš„åª’é«”è³‡æ–™ï¼Ÿ"})]})})){de(I=>{const B=new Set(I);return B.delete(s),B});return}}else{const w=((a=t.media)==null?void 0:a.length)||0,I=((d=i.media)==null?void 0:d.length)||0,B=(t.caption||"").trim(),fe=(i.caption||"").trim(),dt=w!==I,ut=B!==fe&&fe!=="";if(dt||ut){const Xt=B.substring(0,80)+(B.length>80?"...":""),Jt=fe.substring(0,80)+(fe.length>80?"...":"");if(!await oe({title:"ðŸ“ è³‡æ–™è®Šæ›´ç¢ºèª",type:"info",confirmText:"è¦†è“‹",cancelText:"å–æ¶ˆ",content:e.jsxs("div",{className:"confirm-content",children:[e.jsx("p",{children:"æŠ“å–åˆ°çš„è³‡æ–™èˆ‡ç¾æœ‰è³‡æ–™ä¸åŒï¼š"}),dt&&e.jsxs("div",{className:"diff-item",children:[e.jsx("span",{className:"diff-label",children:"ðŸ“· åª’é«”æ•¸é‡"}),e.jsxs("div",{className:"diff-values",children:[e.jsxs("span",{className:"diff-old",children:[w," å¼µ"]}),e.jsx("span",{className:"diff-arrow",children:"â†’"}),e.jsxs("span",{className:"diff-new",children:[I," å¼µ"]})]})]}),ut&&e.jsxs("div",{className:"diff-item",children:[e.jsx("span",{className:"diff-label",children:"ðŸ“ å…§å®¹"}),e.jsxs("div",{className:"diff-text",children:[e.jsx("div",{className:"diff-old",children:Xt||"(ç©º)"}),e.jsx("div",{className:"diff-new",children:Jt})]})]}),e.jsx("p",{className:"confirm-question",children:"ç¢ºå®šè¦è¦†è“‹å—Žï¼Ÿ"})]})})){de(Kt=>{const mt=new Set(Kt);return mt.delete(s),mt}),f("å·²å–æ¶ˆåŒæ­¥");return}}}f("åŒæ­¥ä¸­ï¼Œæª¢æŸ¥ä¸¦ä¸Šå‚³åœ–ç‰‡...","info");const j=((r=i.media)==null?void 0:r.length)>0?await st(i.media,t.media||[],t.member):[],g=(t.media||[]).filter(w=>w.type==="youtube"),x=[...j,...g],u=ze((o=i.owner)==null?void 0:o.username,t.igUrl),l=Ie(u),p=Be(u);let b=t.date,N=t.time||"";if(p!=null&&p.dateFormat&&i.caption){const w=Q(i.caption,p.dateFormat);w&&(b=w)}else if(i.date){const w=new Date(i.date),I=new Date(w.getTime()+480*60*1e3);b=`${I.getUTCFullYear()}-${String(I.getUTCMonth()+1).padStart(2,"0")}-${String(I.getUTCDate()).padStart(2,"0")}`,N=`${String(I.getUTCHours()).padStart(2,"0")}:${String(I.getUTCMinutes()).padStart(2,"0")}`}if(!p&&l==="å…¨å“¡"&&i.caption){const w=Q(i.caption,"auto");w&&(b=w,N="")}const D={...t,media:x,caption:i.caption||t.caption,type:(p==null?void 0:p.type)||t.type,date:b,time:N,updatedAt:Date.now()};S(w=>{const I=w.map(B=>B.id===s?D:B);return J.update(D).catch(B=>console.warn("D1 å„²å­˜å¤±æ•—:",B)),I}),R(w=>(w==null?void 0:w.id)===s?D:w),V(0),j.length>0?f(`âœ… åŒæ­¥å®Œæˆï¼š${j.length} å€‹åª’é«”`):f("å·²æ¸…ç©ºåª’é«”è³‡æ–™","info")}catch(i){console.error("åŒæ­¥å¤±æ•—:",i),f("âŒ åŒæ­¥å¤±æ•—ï¼š"+i.message,"error")}finally{de(i=>{const j=new Set(i);return j.delete(s),j})}}function Ot(){c&&(zt(c),R(null))}const[Ce,me]=m.useState(!1),[Ke,he]=m.useState(""),[Qe,pe]=m.useState(0),[Ze,X]=m.useState(!1),[Se,Ue]=m.useState("");async function et(){var t,s;if(h.igUrl){me(!0),he("æŠ“å–ä¸­...");try{const n=await De(h.igUrl);if(n.success&&((t=n.media)==null?void 0:t.length)>0){const a=ze((s=n.owner)==null?void 0:s.username,h.igUrl),d=Ie(a),r=Be(a);let o=h.date,i="";if(r!=null&&r.dateFormat&&n.caption){const l=Q(n.caption,r.dateFormat);l&&(o=l)}else if(n.date){const l=new Date(n.date),p=new Date(l.getTime()+480*60*1e3);o=`${p.getUTCFullYear()}-${String(p.getUTCMonth()+1).padStart(2,"0")}-${String(p.getUTCDate()).padStart(2,"0")}`,i=`${String(p.getUTCHours()).padStart(2,"0")}:${String(p.getUTCMinutes()).padStart(2,"0")}`}if(!r&&d==="å…¨å“¡"&&n.caption){const l=Q(n.caption,"auto");l&&(o=l,i="")}const j=n.media||[],g=j.map((l,p)=>({url:l.url||l.thumbnail,type:l.type,thumbnail:l.thumbnail||null,uploading:l.type==="image",thumbnailUploading:l.type==="video"&&l.thumbnail,originalUrl:l.url,originalThumbnail:l.thumbnail,index:p}));C(l=>({...l,type:(r==null?void 0:r.type)||n.type||l.type,member:d,date:o,time:i||l.time,caption:n.caption||l.caption,media:g})),me(!1),he(""),X(!1),f(`âœ… å·²æŠ“å– ${j.length} å€‹åª’é«”ï¼ŒèƒŒæ™¯ä¸Šå‚³ä¸­...`);const x=g.filter(l=>l.type==="image"),u=g.filter(l=>l.type==="video"&&l.thumbnail);pe(x.length+u.length);for(const l of x)tt(l.originalUrl,l.index,d);for(const l of u)Lt(l.originalThumbnail,l.index,d)}else{const a=h.igUrl.match(/instagram\.com\/p\//),d=h.igUrl.match(/instagram\.com\/(?:reel|reels)\//);let r="post";d&&(r="reels"),C(o=>({...o,type:r})),X(!0),f("âš ï¸ è‡ªå‹•æŠ“å–å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¼¸å…¥åª’é«”ç¶²å€","info"),me(!1),he("")}}catch(n){console.error("è§£æžå¤±æ•—",n),X(!0),f("âš ï¸ æŠ“å–å¤±æ•—ï¼Œè«‹æ‰‹å‹•è¼¸å…¥åª’é«”ç¶²å€","error"),me(!1),he("")}}}async function Gt(){if(!Se.trim())return;const t=Se.split(`
`).map(a=>a.trim()).filter(a=>a&&(a.startsWith("http")||a.startsWith("//")));if(t.length===0){f("è«‹è¼¸å…¥æœ‰æ•ˆçš„ç¶²å€","error");return}const s=t.map((a,d)=>{if(aa(a))return{url:a,type:"youtube",thumbnail:Te(a),index:h.media.length+d};const r=/\.(mp4|mov|webm|m4v)/i.test(a)||a.includes("video");return{url:a,type:r?"video":"image",uploading:!r,originalUrl:a,index:h.media.length+d}});C(a=>({...a,media:[...a.media,...s]}));const n=s.filter(a=>a.type==="image");pe(a=>a+n.length);for(const a of n)tt(a.originalUrl,a.index,h.member);Ue(""),X(!1),f(`å·²æ–°å¢ž ${t.length} å€‹åª’é«”`)}async function tt(t,s,n){try{const a={context:"social",member:n},[d,r]=await Promise.all([se(t,a),xe(t,a)]);C(o=>({...o,media:o.media.map((i,j)=>j===s?{...i,url:d,backupUrl:r,uploading:!1}:i)})),r&&console.log(`âœ… åœ–ç‰‡ ${s+1} é›™é‡å‚™ä»½å®Œæˆ`)}catch(a){console.warn(`åœ–ç‰‡ ${s+1} ä¸Šå‚³å¤±æ•—`,a),C(d=>({...d,media:d.media.map((r,o)=>o===s?{...r,uploading:!1,uploadFailed:!0}:r)}))}finally{pe(a=>a-1)}}async function Lt(t,s,n){try{const a={context:"social",member:n},[d,r]=await Promise.all([se(t,a),xe(t,a)]);C(o=>({...o,media:o.media.map((i,j)=>j===s?{...i,thumbnail:d,thumbnailBackupUrl:r,thumbnailUploading:!1}:i)})),r&&console.log(`âœ… å½±ç‰‡ ${s+1} ç¸®åœ–é›™é‡å‚™ä»½å®Œæˆ`)}catch(a){console.warn(`å½±ç‰‡ ${s+1} ç¸®åœ–ä¸Šå‚³å¤±æ•—`,a),C(d=>({...d,media:d.media.map((r,o)=>o===s?{...r,thumbnailUploading:!1,thumbnailFailed:!0}:r)}))}finally{pe(a=>a-1)}}async function Rt(t){const s=Array.from(t.target.files);if(s.length){Ve(!0);try{const n=[];for(const a of s)if(a.type.startsWith("video/")){const r=URL.createObjectURL(a);n.push({url:r,type:"video",localFile:a})}else{const r=await se(a,{context:"social",member:h.member});n.push({url:r,type:"image"})}C(a=>({...a,media:[...a.media,...n]})),f(`å·²æ–°å¢ž ${n.length} å€‹æª”æ¡ˆ`)}catch(n){console.error("ä¸Šå‚³å¤±æ•—",n),f("ä¸Šå‚³å¤±æ•—","error")}finally{Ve(!1)}}}function Vt(t){C(s=>({...s,media:s.media.filter((n,a)=>a!==t)}))}async function _t(){if(!h.date||!h.member){f("è«‹å¡«å¯«å¿…è¦æ¬„ä½","error");return}if(h.media.some(n=>n.uploading)&&!await oe({title:"âš ï¸ ä¸Šå‚³æœªå®Œæˆ",type:"warning",confirmText:"ä»è¦å„²å­˜",cancelText:"ç­‰å¾…ä¸Šå‚³",content:e.jsxs("div",{className:"confirm-content",children:[e.jsx("p",{children:"é‚„æœ‰åœ–ç‰‡æ­£åœ¨ä¸Šå‚³ä¸­ï¼Œç¢ºå®šè¦ç¾åœ¨å„²å­˜å—Žï¼Ÿ"}),e.jsx("p",{className:"confirm-warning",children:"æœªå®Œæˆä¸Šå‚³çš„åœ–ç‰‡å¯èƒ½ç„¡æ³•æ­£å¸¸é¡¯ç¤º"})]})}))return;const s={id:(M==null?void 0:M.id)||sa("s"),type:h.type,member:h.member,date:h.date,time:h.time,igUrl:h.igUrl,caption:h.caption,media:h.media.map(n=>({url:n.url,type:n.type,...n.backupUrl&&{backupUrl:n.backupUrl},...n.thumbnail&&{thumbnail:n.thumbnail},...n.thumbnailBackupUrl&&{thumbnailBackupUrl:n.thumbnailBackupUrl}})),notes:h.notes,createdAt:(M==null?void 0:M.createdAt)||Date.now(),updatedAt:Date.now()};ne(!0);try{M?(await J.update(s),S(k.map(n=>n.id===M.id?s:n))):(await J.create(s),S([s,...k])),f("å·²å„²å­˜"),L(!1)}catch(n){console.error("å„²å­˜å¤±æ•—",n),f("å„²å­˜å¤±æ•—","error")}finally{ne(!1)}}async function Yt(t){if(await oe({title:"ðŸ—‘ï¸ åˆªé™¤ç¢ºèª",type:"danger",confirmText:"åˆªé™¤",cancelText:"å–æ¶ˆ",content:e.jsxs("div",{className:"confirm-content",children:[e.jsx("p",{children:"ç¢ºå®šè¦åˆªé™¤é€™ç­†å‚™ä»½å—Žï¼Ÿ"}),e.jsx("p",{className:"confirm-warning",children:"æ­¤æ“ä½œç„¡æ³•å¾©åŽŸ"})]})}))try{await J.delete(t),S(k.filter(n=>n.id!==t)),f("å·²åˆªé™¤")}catch(n){console.error("åˆªé™¤å¤±æ•—",n),f("åˆªé™¤å¤±æ•—","error")}}function at(t){H(s=>s.includes(t)?s.filter(n=>n!==t):[...s,t])}function Wt(){Y.length===U.length?H([]):H(U.map(t=>t.id))}async function st(t,s=[],n){var r,o,i,j;const a=[],d=[];for(let g=0;g<t.length;g++){const x=t[g],u=s[g];if(x.type==="image"){if((u==null?void 0:u.type)==="image"){if((r=u==null?void 0:u.url)!=null&&r.includes("i.ibb.co")&&await ae(u.url)){console.log(`âœ… åœ–ç‰‡ ${g+1} ImgBB å‚™ä»½å¯ç”¨ï¼Œè·³éŽä¸Šå‚³`),a.push({...u});continue}if((o=u==null?void 0:u.backupUrl)!=null&&o.includes("cloudinary")&&await ae(u.backupUrl)){console.log(`âœ… åœ–ç‰‡ ${g+1} Cloudinary å‚™ä»½å¯ç”¨ï¼Œåˆ‡æ›ä½¿ç”¨`),a.push({url:u.backupUrl,type:"image",backupUrl:u.backupUrl});continue}console.log(`âš ï¸ åœ–ç‰‡ ${g+1} æ‰€æœ‰å‚™ä»½éƒ½å¤±æ•ˆï¼Œé‡æ–°ä¸Šå‚³`)}try{console.log(`ðŸ“¤ ä¸Šå‚³åœ–ç‰‡ ${g+1}...`);const l={context:"social",member:n},b={url:await se(x.url,l),type:"image"};a.push(b);const N=a.length-1;d.push(xe(x.url,l).then(D=>{D&&(a[N].backupUrl=D)}).catch(D=>console.warn("Cloudinary èƒŒæ™¯ä¸Šå‚³å¤±æ•—:",D)))}catch(l){console.warn("åœ–ç‰‡ä¸Šå‚³å¤±æ•—:",l),a.push({url:x.url,type:"image"})}}else if(x.type==="video"){const l={url:x.url,type:"video"};if(x.thumbnail){if((u==null?void 0:u.type)==="video"){if((i=u==null?void 0:u.thumbnail)!=null&&i.includes("i.ibb.co")&&await ae(u.thumbnail)){console.log(`âœ… å½±ç‰‡ ${g+1} ç¸®åœ– ImgBB å‚™ä»½å¯ç”¨ï¼Œè·³éŽä¸Šå‚³`),l.thumbnail=u.thumbnail,u.thumbnailBackupUrl&&(l.thumbnailBackupUrl=u.thumbnailBackupUrl),a.push(l);continue}if((j=u==null?void 0:u.thumbnailBackupUrl)!=null&&j.includes("cloudinary")&&await ae(u.thumbnailBackupUrl)){console.log(`âœ… å½±ç‰‡ ${g+1} ç¸®åœ– Cloudinary å‚™ä»½å¯ç”¨ï¼Œåˆ‡æ›ä½¿ç”¨`),l.thumbnail=u.thumbnailBackupUrl,l.thumbnailBackupUrl=u.thumbnailBackupUrl,a.push(l);continue}console.log(`âš ï¸ å½±ç‰‡ ${g+1} ç¸®åœ–æ‰€æœ‰å‚™ä»½éƒ½å¤±æ•ˆï¼Œé‡æ–°ä¸Šå‚³`)}try{console.log(`ðŸ“¤ ä¸Šå‚³å½±ç‰‡ ${g+1} ç¸®åœ–...`);const p={context:"social",member:n},b=await se(x.thumbnail,p);l.thumbnail=b,d.push(xe(x.thumbnail,p).then(N=>{N&&(l.thumbnailBackupUrl=N)}).catch(N=>console.warn("Cloudinary ç¸®åœ–èƒŒæ™¯ä¸Šå‚³å¤±æ•—:",N)))}catch(p){console.warn("ç¸®åœ–ä¸Šå‚³å¤±æ•—:",p),l.thumbnail=x.thumbnail}}a.push(l)}}return d.length>0&&Promise.all(d).then(()=>{console.log("âœ… Cloudinary èƒŒæ™¯ä¸Šå‚³å®Œæˆ")}),a}function Et(t,s){return t.map((a,d)=>{const r=s[d];return a.type==="video"&&(r==null?void 0:r.type)==="video"?{...a,url:r.url}:(a.type==="image",a)})}function Ht(){q.current=!0,f("æ­£åœ¨å–æ¶ˆåŒæ­¥...","info")}async function qt(){var d,r;const t=k.filter(o=>Y.includes(o.id)&&o.igUrl);if(t.length===0){f("æ²’æœ‰å¯åŒæ­¥çš„é …ç›®ï¼ˆéœ€æœ‰ IG é€£çµï¼‰","error");return}const s=ee;q.current=!1,We(!0),He({current:0,total:t.length});let n=0;for(const o of t){if(q.current)break;qe(o.id),await new Promise(i=>setTimeout(i,0));try{const i=await De(o.igUrl);if(q.current)break;if(i.success&&((d=i.media)==null?void 0:d.length)>0){const j=ze((r=i.owner)==null?void 0:r.username,o.igUrl),g=Ie(j),x=Be(j);let u=o.date,l=o.time||"";if(x!=null&&x.dateFormat&&i.caption){const b=Q(i.caption,x.dateFormat);b&&(u=b)}else if(i.date){const b=new Date(i.date),N=new Date(b.getTime()+480*60*1e3);u=`${N.getUTCFullYear()}-${String(N.getUTCMonth()+1).padStart(2,"0")}-${String(N.getUTCDate()).padStart(2,"0")}`,l=`${String(N.getUTCHours()).padStart(2,"0")}:${String(N.getUTCMinutes()).padStart(2,"0")}`}if(!x&&g==="å…¨å“¡"&&i.caption){const b=Q(i.caption,"auto");b&&(u=b,l="")}let p;if(s){const b=Et(o.media,i.media);p={...o,media:b,type:(x==null?void 0:x.type)||o.type,date:u,time:l,updatedAt:Date.now()},console.log(`âœ… ${o.id} å½±ç‰‡ URL å·²æ›´æ–°ï¼ˆä¿ç•™ thumbnailï¼‰`)}else{const b=await st(i.media,o.media||[],o.member);if(q.current)break;const N=(o.media||[]).filter(w=>w.type==="youtube"),D=[...b,...N];p={...o,media:D,caption:i.caption||o.caption,type:(x==null?void 0:x.type)||o.type,date:u,time:l,updatedAt:Date.now()}}S(b=>b.map(N=>N.id===o.id?p:N)),J.update(p).catch(b=>console.warn("D1 å„²å­˜å¤±æ•—:",b)),n++,await new Promise(b=>setTimeout(b,0))}}catch(i){console.warn(`åŒæ­¥ ${o.id} å¤±æ•—:`,i)}He(i=>({...i,current:i.current+1})),await new Promise(i=>setTimeout(i,0))}const a=q.current;qe(null),We(!1),_e(!1),H([]),a?f(`å·²å–æ¶ˆåŒæ­¥ï¼ˆå·²å®Œæˆ ${n} ç­†ï¼‰`,"info"):f(s?`å½±ç‰‡åŒæ­¥å®Œæˆï¼š${n}/${t.length} ç­†æˆåŠŸ`:`åŒæ­¥å®Œæˆï¼š${n}/${t.length} ç­†æˆåŠŸ`)}return G?e.jsxs("div",{className:"archive-page-loading",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"è¼‰å…¥ä¸­..."})]}):e.jsxs("div",{className:"social-archive archive-page",children:[e.jsxs("header",{className:"archive-header",children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("h1",{children:"ðŸ“± ç¤¾ç¾¤å‚™ä»½"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("button",{className:"add-btn",onClick:Xe,title:"æ–°å¢žå‚™ä»½",children:e.jsx(ia,{size:20})}),$&&e.jsx(Qt,{currentPage:T,setCurrentPage:$})]})]}),e.jsxs("div",{className:"archive-filters",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("select",{value:ie,onChange:t=>vt(t.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"æ‰€æœ‰æˆå“¡"}),ht.map(t=>e.jsx("option",{value:t.name,children:t.name},t.name))]}),e.jsxs("select",{value:le,onChange:t=>yt(t.target.value),className:"filter-select",children:[e.jsx("option",{value:"all",children:"æ‰€æœ‰é¡žåž‹"}),W.map(t=>e.jsxs("option",{value:t.id,children:[t.icon," ",t.label]},t.id))]}),e.jsxs("button",{className:`filter-video-btn ${ee?"active":""}`,onClick:()=>wt(!ee),title:"åªé¡¯ç¤ºå«å½±ç‰‡çš„è²¼æ–‡",children:[e.jsx(la,{size:16}),e.jsx("span",{children:"å½±ç‰‡"})]}),v&&e.jsx("button",{className:`filter-broken-btn ${re?"active":""}`,onClick:()=>{Object.keys(P).length===0&&!je&&It(),Nt(!re)},title:"æª¢æŸ¥ä¸¦ç¯©é¸å£žåœ–",disabled:je,children:je?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mini-spinner"}),e.jsxs("span",{children:[Oe.current,"/",Oe.total]})]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{size:16}),e.jsxs("span",{children:["å£žåœ–",Object.keys(P).length>0?` (${Object.keys(P).length})`:""]})]})}),e.jsxs("div",{className:"search-box",children:[e.jsx(ra,{size:16}),e.jsx("input",{type:"text",placeholder:"æœå°‹å…§å®¹...",value:ce,onChange:t=>kt(t.target.value)})]}),e.jsxs("div",{className:"view-toggle",children:[e.jsx("button",{className:O==="grid"?"active":"",onClick:()=>Fe("grid"),children:e.jsx(ca,{size:16})}),e.jsx("button",{className:O==="list"?"active":"",onClick:()=>Fe("list"),children:e.jsx(oa,{size:16})})]}),v&&e.jsx("button",{className:`select-mode-btn ${_?"active":""}`,onClick:()=>{_e(!_),H([])},title:"å‹¾é¸æ¨¡å¼",children:e.jsx(gt,{size:16})})]}),e.jsxs("div",{className:"filter-stats",children:["å…± ",U.length," ç­†å‚™ä»½",_&&U.length>0&&e.jsx("button",{className:"select-all-btn",onClick:Wt,children:Y.length===U.length?"å–æ¶ˆå…¨é¸":"å…¨é¸"})]})]}),e.jsx("div",{ref:ye,className:"social-content-scroll",children:U.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(xt,{size:48}),e.jsx("p",{children:"å°šç„¡å‚™ä»½è³‡æ–™"}),e.jsx("button",{onClick:Xe,children:"æ–°å¢žç¬¬ä¸€ç­†"})]}):e.jsx("div",{style:{height:Ne.getTotalSize(),position:"relative"},children:Ne.getVirtualItems().map(t=>{const s=t.index*te,n=U.slice(s,s+te);return e.jsx("div",{className:`archive-content ${O}`,style:{position:"absolute",top:0,left:0,right:0,transform:`translateY(${t.start}px)`,...O==="grid"?{gridTemplateColumns:`repeat(${te}, 1fr)`}:{}},ref:Ne.measureElement,"data-index":t.index,children:n.map(a=>{var d,r,o,i,j;return e.jsxs("div",{className:`archive-card ${_&&Y.includes(a.id)?"selected":""}`,onClick:()=>_?at(a.id):Dt(a),children:[_&&e.jsx("div",{className:"card-checkbox",onClick:g=>{g.stopPropagation(),at(a.id)},children:Y.includes(a.id)?e.jsx(gt,{size:20}):e.jsx(da,{size:20})}),e.jsxs("div",{className:"archive-thumb",children:[(d=a.media)!=null&&d[0]?a.media[0].type==="youtube"?e.jsxs("div",{className:"video-thumb-img",children:[e.jsx("img",{src:a.media[0].thumbnail||Te(a.media[0].url),alt:"",loading:"lazy",width:260,height:260}),e.jsx(K,{size:24,className:"play-overlay"})]}):a.media[0].type==="video"?a.media[0].thumbnail?e.jsxs("div",{className:"video-thumb-img",children:[e.jsx("img",{src:pt(a.media[0]),alt:"",loading:"lazy",width:260,height:260}),e.jsx(K,{size:24,className:"play-overlay"})]}):e.jsxs("div",{className:"video-thumb-auto",children:[e.jsx("video",{src:a.media[0].backupUrl||a.media[0].url,muted:!0,preload:"metadata"}),e.jsx(K,{size:24,className:"play-overlay"})]}):e.jsx("img",{src:pt(a.media[0]),alt:"",loading:"lazy",width:260,height:260}):e.jsx("div",{className:"no-thumb",children:e.jsx("img",{src:"/bigbang-timeline/bigbang-default.png",alt:"BIGBANG"})}),((r=a.media)==null?void 0:r.length)>1&&e.jsxs("span",{className:"media-count",children:["+",a.media.length-1]}),e.jsx("span",{className:"type-badge",style:{background:(o=W.find(g=>g.id===a.type))==null?void 0:o.color},children:(i=W.find(g=>g.id===a.type))==null?void 0:i.icon}),((j=P[a.id])==null?void 0:j.length)>0&&e.jsxs("span",{className:"broken-badge",title:`${P[a.id].length} å¼µåœ–ç‰‡æå£ž`,children:[e.jsx($e,{size:14}),P[a.id].length]}),(Je.has(a.id)||Ut===a.id)&&e.jsxs("div",{className:"syncing-overlay",children:[e.jsx(Me,{size:24,className:"spinning"}),e.jsx("span",{children:"åŒæ­¥ä¸­..."})]})]}),e.jsxs("div",{className:"archive-info",children:[e.jsxs("div",{className:"archive-meta",children:[e.jsx("span",{className:"member-tag",style:{background:ge(a.member)+"30",color:ge(a.member)},children:a.member}),e.jsx("span",{className:"date",children:ft(a.date)})]}),a.caption&&e.jsx("p",{className:"archive-caption",children:a.caption})]})]},a.id)})},t.key)})})}),c&&e.jsxs("div",{className:"modal-overlay view-modal-overlay",onClick:()=>R(null),children:[e.jsxs("div",{className:"post-nav-indicator",onClick:t=>t.stopPropagation(),children:[ke()+1," / ",U.length]}),e.jsx("button",{className:"post-nav-side prev",onClick:t=>{t.stopPropagation(),Pt()},disabled:ke()<=0,title:"ä¸Šä¸€å‰‡",children:e.jsx(ua,{size:32})}),e.jsxs("div",{className:"view-modal",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{className:"view-close-btn",onClick:()=>R(null),children:e.jsx(be,{size:24})}),e.jsx("div",{className:"view-media-area",children:((nt=c.media)==null?void 0:nt.length)>0?e.jsxs(e.Fragment,{children:[((it=c.media[F])==null?void 0:it.type)==="youtube"?e.jsx("iframe",{src:`https://www.youtube.com/embed/${Zt(c.media[F].url)}?autoplay=1`,allow:"autoplay; encrypted-media",allowFullScreen:!0,className:"view-media view-youtube"}):((lt=c.media[F])==null?void 0:lt.type)==="video"?e.jsx("video",{src:c.media[F].backupUrl||c.media[F].url,controls:!0,autoPlay:!0,className:"view-media"},`${c.id}-${F}`):e.jsx("img",{src:ea(c.media[F]),alt:"",className:"view-media"},`${c.id}-${F}`),c.media.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"media-nav prev",onClick:()=>V(t=>(t-1+c.media.length)%c.media.length),children:"â€¹"}),e.jsx("button",{className:"media-nav next",onClick:()=>V(t=>(t+1)%c.media.length),children:"â€º"}),e.jsx("div",{className:"media-dots",children:c.media.map((t,s)=>e.jsx("span",{className:`dot ${s===F?"active":""}`,onClick:()=>V(s)},s))})]})]}):e.jsx("div",{className:"no-media",children:e.jsx("img",{src:"/bigbang-timeline/bigbang-default.png",alt:"BIGBANG",className:"no-media-img"})})}),e.jsxs("div",{className:"view-info-area",children:[e.jsxs("div",{className:"view-header",children:[e.jsx("span",{className:"member-tag",style:{background:ge(c.member)+"30",color:ge(c.member)},children:c.member}),e.jsxs("span",{className:"type-badge",style:{background:(rt=W.find(t=>t.id===c.type))==null?void 0:rt.color},children:[(ct=W.find(t=>t.id===c.type))==null?void 0:ct.icon," ",(ot=W.find(t=>t.id===c.type))==null?void 0:ot.label]}),e.jsx("span",{className:"view-date",children:v&&c.time?ta(c.date,c.time):ft(c.date)})]}),c.caption&&e.jsx("div",{className:"view-caption",children:e.jsx("p",{children:c.caption})}),c.notes&&e.jsxs("div",{className:"view-notes",children:[e.jsx("strong",{children:"å‚™è¨»ï¼š"}),e.jsx("p",{children:c.notes})]}),e.jsxs("div",{className:"view-actions",children:[c.igUrl&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:c.igUrl,target:"_blank",rel:"noopener noreferrer",className:"view-link-btn",children:[e.jsx(ma,{size:16})," é–‹å•Ÿ IG"]}),v&&e.jsxs("button",{className:"view-sync-btn",onClick:At,disabled:ue(c.id),title:"é‡æ–°æŠ“å– IG è³‡æ–™",children:[e.jsx(Me,{size:16,className:ue(c.id)?"spinning":""}),ue(c.id)?"åŒæ­¥ä¸­...":"åŒæ­¥"]})]}),e.jsx("button",{className:"view-edit-btn",onClick:Ot,children:"âœï¸ ç·¨è¼¯"})]})]})]}),e.jsx("button",{className:"post-nav-side next",onClick:t=>{t.stopPropagation(),Ft()},disabled:ke()>=U.length-1,title:"ä¸‹ä¸€å‰‡",children:e.jsx(ha,{size:32})})]}),St&&e.jsx("div",{className:"modal-overlay",onClick:()=>L(!1),children:e.jsxs("div",{className:"archive-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:M?"ç·¨è¼¯å‚™ä»½":"æ–°å¢žå‚™ä»½"}),e.jsx("button",{className:"close-btn",onClick:()=>L(!1),children:e.jsx(be,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(xt,{size:14})," IG é€£çµ","ï¼ˆè‡ªå‹•æŠ“å–ï¼‰"]}),e.jsxs("div",{className:"ig-url-input",children:[e.jsx("input",{type:"url",placeholder:"è²¼ä¸Š Instagram é€£çµï¼Œè‡ªå‹•æŠ“å–åœ–ç‰‡å’Œæ–‡å­—...",value:h.igUrl,onChange:t=>C(s=>({...s,igUrl:t.target.value})),onBlur:et,disabled:Ce}),e.jsx("button",{onClick:et,title:"æŠ“å–è³‡æ–™",disabled:Ce,children:Ce?e.jsx("span",{className:"fetching-spinner"}):e.jsx(bt,{size:16})}),Ke&&e.jsx("span",{className:"fetch-progress",children:Ke})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"é¡žåž‹"}),e.jsx("div",{className:"type-selector",children:W.map(t=>e.jsxs("button",{className:h.type===t.id?"active":"",style:h.type===t.id?{background:t.color}:{},onClick:()=>C(s=>({...s,type:t.id})),children:[t.icon," ",t.label]},t.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"æˆå“¡"}),e.jsx("select",{value:h.member,onChange:t=>C(s=>({...s,member:t.target.value})),children:ht.map(t=>e.jsx("option",{value:t.name,children:t.name},t.name))})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(pa,{size:14})," ç™¼æ–‡æ—¥æœŸ"]}),e.jsx("input",{type:"date",value:h.date,onChange:t=>C(s=>({...s,date:t.target.value}))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"æ™‚é–“ï¼ˆé¸å¡«ï¼‰"}),e.jsx("input",{type:"time",value:h.time,onChange:t=>C(s=>({...s,time:t.target.value}))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx(fa,{size:14})," åœ–ç‰‡/å½±ç‰‡",Qe>0&&e.jsxs("span",{className:"upload-status",children:["ï¼ˆ",Qe," å¼µä¸Šå‚³ä¸­...ï¼‰"]})]}),e.jsxs("div",{className:"media-upload-area",children:[h.media.map((t,s)=>{var a;const n=M&&((a=P[M.id])==null?void 0:a.includes(s));return e.jsxs("div",{className:`media-preview ${t.uploading?"uploading":""} ${t.uploadFailed?"failed":""} ${n?"broken":""}`,children:[t.type==="youtube"?e.jsxs("div",{className:"video-preview-img",children:[e.jsx("img",{src:t.thumbnail||Te(t.url),alt:""}),e.jsx(K,{size:16,className:"play-icon"})]}):t.type==="video"?t.thumbnail?e.jsxs("div",{className:"video-preview-img",children:[e.jsx("img",{src:t.thumbnailBackupUrl||t.thumbnail,alt:""}),e.jsx(K,{size:16,className:"play-icon"})]}):e.jsxs("div",{className:"video-preview-auto",children:[e.jsx("video",{src:t.backupUrl||t.url,muted:!0,preload:"metadata"}),e.jsx(K,{size:16,className:"play-icon"})]}):e.jsx("img",{src:t.backupUrl||t.url,alt:""}),t.uploading&&e.jsx("div",{className:"upload-overlay",children:e.jsx("div",{className:"mini-spinner"})}),t.uploadFailed&&e.jsx("div",{className:"upload-failed-badge",title:"ä¸Šå‚³å¤±æ•—ï¼Œå°‡ä½¿ç”¨åŽŸå§‹é€£çµ",children:"âš ï¸"}),n&&e.jsx("div",{className:"broken-image-badge",title:"æ­¤åœ–ç‰‡å·²æå£žï¼Œè«‹é‡æ–°ä¸Šå‚³",children:e.jsx($e,{size:14})}),e.jsx("button",{className:"remove-media",onClick:()=>Vt(s),children:e.jsx(be,{size:14})})]},s)}),e.jsxs("label",{className:"upload-btn",children:[e.jsx("input",{type:"file",accept:"image/*,video/*",multiple:!0,onChange:Rt,disabled:Re}),Re?e.jsx("span",{className:"uploading",children:"ä¸Šå‚³ä¸­..."}):e.jsxs(e.Fragment,{children:[e.jsx(ga,{size:20}),e.jsx("span",{children:"ä¸Šå‚³"})]})]}),e.jsxs("button",{type:"button",className:"manual-url-toggle",onClick:()=>X(!Ze),children:[e.jsx(bt,{size:16}),e.jsx("span",{children:"è²¼ä¸Šç¶²å€"})]})]}),Ze&&e.jsxs("div",{className:"manual-url-input",children:[e.jsx("p",{className:"manual-hint",children:"ðŸ’¡ æç¤ºï¼šæ”¯æ´åœ–ç‰‡ã€å½±ç‰‡ã€YouTube é€£çµï¼Œæ¯è¡Œä¸€å€‹"}),e.jsx("textarea",{placeholder:`è²¼ä¸Šåœ–ç‰‡/å½±ç‰‡/YouTube ç¶²å€ï¼Œæ¯è¡Œä¸€å€‹...
ä¾‹å¦‚ï¼š
https://scontent-xxx.cdninstagram.com/...jpg
https://www.youtube.com/watch?v=xxxxx`,value:Se,onChange:t=>Ue(t.target.value),rows:4}),e.jsxs("div",{className:"manual-actions",children:[e.jsx("button",{type:"button",className:"cancel-manual",onClick:()=>{X(!1),Ue("")},children:"å–æ¶ˆ"}),e.jsx("button",{type:"button",className:"submit-manual",onClick:Gt,children:"æ–°å¢žåª’é«”"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"åŽŸæ–‡å…§å®¹"}),e.jsx("textarea",{placeholder:"è²¼ä¸Š IG åŽŸæ–‡å…§å®¹...",value:h.caption,onChange:t=>C(s=>({...s,caption:t.target.value})),rows:4})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"å‚™è¨»ï¼ˆé¸å¡«ï¼‰"}),e.jsx("textarea",{placeholder:"å…¶ä»–å‚™è¨»...",value:h.notes,onChange:t=>C(s=>({...s,notes:t.target.value})),rows:2})]})]}),e.jsxs("div",{className:"modal-footer",children:[M&&e.jsxs("button",{className:"delete-btn",onClick:()=>{Yt(M.id),L(!1)},children:[e.jsx(xa,{size:16})," åˆªé™¤"]}),e.jsx("button",{className:"cancel-btn",onClick:()=>L(!1),children:"å–æ¶ˆ"}),e.jsxs("button",{className:"save-btn",onClick:_t,disabled:E,children:[e.jsx(ba,{size:16})," ",E?"å„²å­˜ä¸­...":"å„²å­˜"]})]})]})}),_&&Y.length>0&&e.jsxs("div",{className:"batch-action-bar",children:[e.jsxs("span",{className:"batch-count",children:["å·²é¸å– ",Y.length," ç­†"]}),e.jsxs("div",{className:"batch-actions",children:[!Ye&&e.jsx("button",{className:"batch-cancel-btn",onClick:()=>H([]),children:"å–æ¶ˆé¸å–"}),Ye?e.jsxs("button",{className:"batch-stop-btn",onClick:Ht,children:[e.jsx(be,{size:16}),"å–æ¶ˆåŒæ­¥ (",Ee.current,"/",Ee.total,")"]}):e.jsxs("button",{className:"batch-sync-btn",onClick:qt,children:[e.jsx(Me,{size:16}),"åŒæ­¥æŠ“å–"]})]})]}),Z&&e.jsxs("div",{className:`toast ${Z.type}`,children:[Z.type==="error"?e.jsx(ja,{size:16}):e.jsx(va,{size:16}),Z.msg]}),z&&e.jsx("div",{className:"confirm-modal-overlay",onClick:z.onCancel,children:e.jsxs("div",{className:`confirm-modal confirm-modal-${z.type}`,onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"confirm-modal-title",children:z.title}),e.jsx("div",{className:"confirm-modal-body",children:z.content}),e.jsxs("div",{className:"confirm-modal-actions",children:[e.jsx("button",{className:"confirm-modal-cancel",onClick:z.onCancel,children:z.cancelText}),e.jsx("button",{className:`confirm-modal-confirm confirm-modal-confirm-${z.type}`,onClick:z.onConfirm,children:z.confirmText})]})]})})]})}const $a=m.memo(Na);export{$a as default};
